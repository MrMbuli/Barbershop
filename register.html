<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Loyalty Points | King's Cut</title>
<link rel="manifest" href="data:application/manifest+json,{&quot;name&quot;:&quot;King's Cut Loyalty&quot;,&quot;short_name&quot;:&quot;Loyalty&quot;,&quot;start_url&quot;:&quot;./register.html&quot;,&quot;display&quot;:&quot;standalone&quot;,&quot;background_color&quot;:&quot;#0f0f11&quot;,&quot;theme_color&quot;:&quot;#0f0f11&quot;}">
<style>
body{font-family:"Segoe UI",sans-serif;background:#0f0f11;color:#eaeaea;line-height:1.5;padding:20px}
a{text-decoration:none;color:#bfc6cb}
header{display:flex;justify-content:space-between;align-items:center;background:#111;padding:14px 18px;position:fixed;top:0;left:0;right:0;z-index:10}
.logo-title{font-weight:700}
section{max-width:420px;margin:100px auto 30px;padding:20px;background:#131315;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,0.6)}
input{width:100%;padding:10px;margin-top:6px;border-radius:6px;border:1px solid #333;background:#0b0b0d;color:#eaeaea}
button{padding:10px 14px;border:none;border-radius:8px;background:linear-gradient(90deg,#999,#ccc);font-weight:700;margin-top:10px;width:100%}
footer{text-align:center;padding:20px;background:#111;color:#aaa;margin-top:30px}
</style>
</head>
<body>
<header>
  <div class="logo-title">Loyalty Points</div>
  <a href="index.html">üè† Home</a>
</header>

<section id="registerSection">
  <h2>Create Account</h2>
  <input id="regName" placeholder="Full Name">
  <input id="regPhone" placeholder="Phone (WhatsApp)">
  <input id="regPass" type="password" placeholder="Password">
  <button onclick="register()">Register</button>
  <p id="regMsg"></p>
  <p style="margin-top:10px">Already registered? <a href="#" onclick="showLogin()">Login</a></p>
</section>

<section id="loginSection" style="display:none">
  <h2>Login</h2>
  <input id="loginPhone" placeholder="Phone">
  <input id="loginPass" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <p id="loginMsg"></p>
  <p style="margin-top:10px"><a href="#" onclick="showRecover()">Forgot Password?</a></p>
  <p><a href="#" onclick="showRegister()">New? Register</a></p>
</section>

<section id="recoverSection" style="display:none">
  <h2>Password Recovery</h2>
  <input id="recoverPhone" placeholder="Phone">
  <button onclick="recover()">Recover</button>
  <p id="recoverMsg"></p>
  <p><a href="#" onclick="showLogin()">Back to Login</a></p>
</section>

<footer>
  &copy; 2025 King's Cut Barbershop ‚Äî Crafted by NextWeb.
</footer>

<script>
function showRegister(){toggle('registerSection')}
function showLogin(){toggle('loginSection')}
function showRecover(){toggle('recoverSection')}
function toggle(id){['registerSection','loginSection','recoverSection'].forEach(s=>document.getElementById(s).style.display=(s===id?'block':'none'))}

function register(){
  const n=regName.value.trim(),p=regPhone.value.trim(),pw=regPass.value;
  if(!n||!p||!pw)return regMsg.textContent='Please fill all fields.';
  const users=JSON.parse(localStorage.getItem('kc_users')||'{}');
  if(users[p])return regMsg.textContent='Phone already registered.';
  users[p]={name:n,password:pw};
  localStorage.setItem('kc_users',JSON.stringify(users));
  localStorage.setItem('kc_logged',p);
  regMsg.textContent='Registered successfully!';
}

function login(){
  const p=loginPhone.value.trim(),pw=loginPass.value;
  const users=JSON.parse(localStorage.getItem('kc_users')||'{}');
  if(users[p]&&users[p].password===pw){
    localStorage.setItem('kc_logged',p);
    loginMsg.textContent='Login successful!';
    setTimeout(()=>location.href='index.html',800);
  }else loginMsg.textContent='Invalid phone or password.';
}

function recover(){
  const p=recoverPhone.value.trim();
  const users=JSON.parse(localStorage.getItem('kc_users')||'{}');
  if(users[p])recoverMsg.textContent='Your password: '+users[p].password;
  else recoverMsg.textContent='No account found.';
}

if('serviceWorker' in navigator){navigator.serviceWorker.register('data:application/javascript,self.addEventListener("install",e=>e.waitUntil(caches.open(\\"kc-loyalty-v1\\").then(c=>c.addAll([\\"./register.html\\"])))));self.addEventListener("fetch",e=>e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)))));')}
</script>
</body>
       </html>
